const viewersSVG='<svg class="viewers-svg" width="24px" height="24px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px">\n<g>\n  <path\n    fill-rule="evenodd"\n    d="M5 7a5 5 0 116.192 4.857A2 2 0 0013 13h1a3 3 0 013 3v2h-2v-2a1 1 0 00-1-1h-1a3.99 3.99 0 01-3-1.354A3.99 3.99 0 017 15H6a1 1 0 00-1 1v2H3v-2a3 3 0 013-3h1a2 2 0 001.808-1.143A5.002 5.002 0 015 7zm5 3a3 3 0 110-6 3 3 0 010 6z"\n    clip-rule="evenodd"\n  ></path>\n</g>\n</svg>',followSVG='<svg type="color-fill-current" width="24px" height="24px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px" class="follow-svg">\n<g>\n<path\n  fill-rule="evenodd"\n  d="M9.171 4.171A4 4 0 006.343 3H6a4 4 0 00-4 4v.343a4 4 0 001.172 2.829L10 17l6.828-6.828A4 4 0 0018 7.343V7a4 4 0 00-4-4h-.343a4 4 0 00-2.829 1.172L10 5l-.829-.829zm.829 10l5.414-5.414A2 2 0 0016 7.343V7a2 2 0 00-2-2h-.343a2 2 0 00-1.414.586L10 7.828 7.757 5.586A2 2 0 006.343 5H6a2 2 0 00-2 2v.343a2 2 0 00.586 1.414L10 14.172z"\n  clip-rule="evenodd"\n></path>\n</g>\n</svg>',spinner='<div class="spinner-border" role="status">\n<span class="visually-hidden">Loading...</span>\n</div>',CLIENT_ID="ed2ch5dsxogpczmisjnbfnm92n4zps",requestOptions={method:"GET",redirect:"follow"};function addBadges(e,t){try{let a="";for(let e=0;e<customBadges.length;e++)customBadges[e].users.includes(t)&&customBadges[e].sites.includes("guessr.tv")&&(a+=`<img src="${customBadges[e].url}" class="chat-badge" title="${customBadges[e].name}"/>`);if("streamer"==e)return a+='<img src="https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/3" class="chat-badge" title="Broadcaster"/>',a;for(const t in e)if("subscriber"==t&&e.subscriber&&channelBadges.subscriber.length>0){a+=`<img src="${channelBadges.subscriber.find((t=>t.id===e.subscriber)).url}" class="chat-badge" title="Subscriber"/>`}else if("bits"==t&&channelBadges.bits.length>0){a+=`<img src="${channelBadges.bits.find((t=>t.id===e.bits)).url}" class="chat-badge" title="Bits"/>`}else if(Object.keys(globalBadges).length>0){a+=`<img src="${globalBadges[t].find((a=>a.id===e[t])).image_url_4x}" class="chat-badge" title="${t}"/>`}return a}catch(e){return console.log(e),""}}async function getChannelBadges(e){return new Promise((async function(t,a){try{let a=await fetch(`https://api.okayeg.com/emotes?channel=${e}`,requestOptions),s=await a.json();s.data.badges&&0!=s.data.badges.length||t({subscriber:[],bits:[]});let n={subscriber:[],bits:[]};if(s.data.badges.length>0){let e=[],a=[];s.data.badges[0]&&("subscriber"==s.data.badges[0].set_id&&(e=s.data.badges[0].versions),"bits"==s.data.badges[0].set_id&&(a=s.data.badges[0].versions)),s.data.badges[1]&&("subscriber"==s.data.badges[1].set_id&&(e=s.data.badges[1].versions),"bits"==s.data.badges[1].set_id&&(a=s.data.badges[1].versions));for(let t=0,a=e.length;t<a;t++)n.subscriber.push({id:e[t].id,url:e[t].image_url_4x});for(let e=0,t=a.length;e<t;e++)n.bits.push({id:a[e].id,url:a[e].image_url_4x});t(n)}}catch(e){console.log("getChannelBadges error",e),t({subscriber:[],bits:[]})}}))}async function getGlobalBadges(){return new Promise((async function(e,t){try{let t=await fetch("https://api.okayeg.com/badges/global",requestOptions),a=await t.json();if(a.data&&0!=a.data.length||e({}),a.data.length>0){let t={};for(let e=0,s=a.data.length;e<s;e++)t[a.data[e].set_id]=a.data[e].versions;e(t)}}catch(t){console.log("getGlobalBadges error",t),e({})}}))}async function get7TVPFP(e){return e?new Promise((async function(t,a){try{let a=await fetch(`https://7tv.io/v3/users/twitch/${e}`,requestOptions);200!==a.status&&t("/pics/donk.png");let s=await a.json();t(s?.user?.avatar_url?s.user.avatar_url:"/pics/donk.png")}catch(e){t("/pics/donk.png"),console.log("getprofilepic 7tv error",e)}})):"/pics/donk.png"}async function getTwitchPFP(e,t){let a=new Headers;a.append("client-id",CLIENT_ID),a.append("Authorization",`Bearer ${t}`);let s={method:"GET",headers:a,redirect:"follow"};return new Promise((async function(t,a){try{let a=await fetch(`https://api.twitch.tv/helix/users?login=${e}`,s);t((await a.json()).data[0].profile_image_url)}catch(e){t("/pics/donk.png"),console.log("getprofilepic twitch error",e)}}))}async function checkToken(e){let t=new Headers;t.append("Authorization",`OAuth ${e}`);let a={method:"GET",headers:t,redirect:"follow"};return new Promise((async function(e,t){try{let t=await fetch("https://id.twitch.tv/oauth2/validate",a);t.ok||e(!1),(await t.json()).expires_in<600?e(!1):e(!0)}catch(t){console.log("checkToken error",t),e(!1)}}))}function changeSiteLinkTarget(e){let t=document.getElementsByClassName("site-link");for(let a=0;a<t.length;a++)t[a].setAttribute("target",e)}function shuffleArray(e){for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}function checkSimilarity(e,t){const a=Array(t.length+1).fill(null).map((()=>Array(e.length+1).fill(null)));for(let t=0;t<=e.length;t++)a[0][t]=t;for(let e=0;e<=t.length;e++)a[e][0]=e;for(let s=1;s<=t.length;s++)for(let n=1;n<=e.length;n++){const r=e[n-1]===t[s-1]?0:1;a[s][n]=Math.min(a[s][n-1]+1,a[s-1][n]+1,a[s-1][n-1]+r)}return a[t.length][e.length]<=2}function cleanString(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]/gi,"").toLowerCase()}function enableTooltips(){[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((e=>new bootstrap.Tooltip(e)))}function isInt(e){if(isNaN(e))return!1;let t=parseFloat(e);return(0|t)===t}function hasDuplicates(e){return new Set(e).size!==e.length}function showToast(e,t,a){let s=Date.now(),n=`<div id="${s}" class="toast align-items-center text-bg-${t} border-0" role="alert" data-bs-autohide="false" aria-live="assertive" aria-atomic="true">\n        <div class="d-flex">\n        <div class="toast-body" style="font-size:1.2em">${e}</div>\n        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n        </div>\n        </div>`;elements.toastContainer.innerHTML+=n;let r=[].slice.call(document.querySelectorAll(".toast")).map((function(e){return new bootstrap.Toast(e,{animation:!1})}));r[r.length-1].show(),setTimeout((function(){r[r.length-1].hide(),document.getElementById(s).remove()}),a)}async function sendUsername(e=!1){let t={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({site:"guessr.tv"+(e?" dank":""),channel:channelName,platform:"twitch"}),redirect:"follow"};try{let e=await fetch("https://helper.pepega.workers.dev/log/username",t);console.log("sendUsername response",e.status),usernameSent=!0}catch(e){console.log("sendUsername error",e)}}async function getCustomBadges(){return new Promise((async function(e,t){try{let t=await fetch("https://badges.pepega.workers.dev",requestOptions),a=await t.json();a&&0!=a.length||e([]),e(a)}catch(t){console.log("getCustomBadges error",t),e([])}}))}async function getChannelId(){return new Promise((async function(e,t){try{let t=await fetch(`https://helper.pepega.workers.dev/twitch/users?login=${channelName}`,requestOptions);e((await t.json())?.data[0]?.id||"")}catch(t){console.log("getChannelId error",t),e("")}}))}async function getStreamerColor(){return new Promise((async function(e,t){try{let t=await fetch(`https://helper.pepega.workers.dev/twitch/chat/color?user_id=${channelId}`,requestOptions);e((await t.json())?.data[0]?.color||"#FFFFFF")}catch(t){console.log("getStreamerColor error",t),e("#FFFFFF")}}))}function showConfetti(e){let t,a,s;switch(parseInt(e,10)){case 1:t=100,a=1,s=1e3;break;case 2:t=500,a=2,s=2e3;break;case 3:t=1e3,a=3,s=3e3;break;case 4:t=1e4,a=5,s=5e3;break;default:return}confetti.maxCount=t,confetti.speed=a,confetti.start(s)}