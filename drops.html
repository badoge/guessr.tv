<!DOCTYPE html>
<html lang="en" prefix="og: https://ogp.me/ns#" data-bs-theme="dark">
  <head>
    <meta charset="utf-8" />
    <title>Guessr.tv drops</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Guess the view count. You will be presented with a random Twitch stream and you have to guess how many viewers they have." />
    <meta name="keywords" content="guessr.tv, Twitch" />
    <meta property="og:title" content="guessr.tv drops" />
    <meta property="og:site_name" content="Guessr.tv drops" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://guessr.tv/drops" />
    <meta property="og:image" content="https://guessr.tv/pics/guessr.png" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:description" content="Guess the view count. You will be presented with a random Twitch stream and you have to guess how many viewers they have." />

    <link rel="apple-touch-icon" sizes="180x180" href="/pics/icon/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/pics/icon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/pics/icon/favicon-16x16.png" />
    <link rel="manifest" href="/pics/icon/site.webmanifest" />
    <link rel="mask-icon" href="/pics/icon/safari-pinned-tab.svg" color="#ff8280" />
    <link rel="shortcut icon" href="/pics/icon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#9f00a7" />
    <meta name="msapplication-config" content="/pics/icon/browserconfig.xml" />
    <meta name="theme-color" content="#212529" />

    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/icons.css" />
    <link rel="stylesheet" href="/css/guess.min.css" />

    <style>
      body {
        margin-bottom: 400px;
      }

      .cover-container {
        max-width: 50em;
      }

      .nav-masthead .nav-link {
        color: rgba(255, 255, 255, 0.5);
        border-bottom: 0.25rem solid transparent;
      }

      .nav-masthead .nav-link:hover,
      .nav-masthead .nav-link:focus {
        border-bottom-color: rgba(255, 255, 255, 0.25);
      }

      .nav-masthead .nav-link + .nav-link {
        margin-left: 1rem;
      }

      .nav-masthead .active {
        color: #fff;
        border-bottom-color: #fff;
      }

      .twitch-icon {
        display: inline-block;
        width: 22px;
        height: 26px;
        background-image: url(/pics/twitch.png);
        margin: 0 5px -8px 0;
      }

      .btn-twitch {
        color: #ffffff;
        background-color: #9933ff !important;
        border-color: #8744aa !important;
      }

      .btn-twitch:active,
      .btn-twitch:focus,
      .btn-twitch:hover {
        color: #ffffff;
        background-color: #8038de !important;
        border-color: #7f40a1 !important;
      }
    </style>
  </head>

  <body>
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
      <header class="mb-auto">
        <div>
          <h3 class="float-md-start mb-0"><img src="/pics/guessr.png" alt="Guessr.tv" height="40px" /> Guessr.tv</h3>
          <nav class="nav nav-masthead justify-content-center float-md-end">
            <a class="nav-link fw-bold py-1 px-0" href="/">Home</a>
            <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="#">Drops</a>
          </nav>
        </div>
      </header>

      <main class="p-3">
        <h1>Guessr.tv drops</h1>
        <p class="lead">
          Watch Guessr.tv streams for 30 minutes to earn a Donk badge <img src="https://chat.vote/badges/donk.png" height="24px" /> that will show up on the leaderboard when you play.
          <span class="text-danger">Not a Twitch chat badge, the badge will only show up on the site</span>
        </p>
        <div id="login">
          <h3>Sign in with Twitch to enable drops</h3>
          <a class="btn btn-twitch" href="https://id.twitch.tv/oauth2/authorize?client_id=ed2ch5dsxogpczmisjnbfnm92n4zps&redirect_uri=https://guessr.tv/drops.html&response_type=token">
            <span class="twitch-icon"></span> Sign in with Twitch
          </a>
        </div>

        <p class="text-warning">Drops end on October 31, 2023 9:00pm UTC</p>
        <hr />
        <h4>Who is eligible</h4>
        <p class="lead">
          Any streamer can enable this drop for their viewers by streaming <a href="https://guessr.tv" target="_blank" rel="noopener noreferrer">Guessr.tv</a> for 30 minutes.
        </p>
        <ul class="list-unstyled">
          <li>
            <ul>
              <li class="mb-5">
                Your stream must be in the <a href="https://www.twitch.tv/directory/category/guessr-tv" target="_blank" rel="noopener noreferrer">Guessr.tv</a> Twitch category <br />
                <img src="/pics/category.png" alt="twitch category" style="height: 40vh" />
              </li>
              <li class="mb-5">
                You should fill in your Twitch username in the Play with chat section in the Game settings<br />
                <img src="/pics/username.png" alt="play with chat settings" style="height: 50vh" />
              </li>
            </ul>
          </li>
        </ul>
        <h4>What will I earn</h4>
        <p class="lead">
          Streamers/Viewers that stream/watch for 30 minutes will earn a special Donk badge <img src="https://chat.vote/badges/donk.png" height="24px" /> that will show up on the Guessr.tv
          chat leaderboard while playing. <br /><img src="/pics/example1.png" height="60px" />
        </p>
        <small>You will need to refresh the site to see the badge after claiming the drop</small>
        <br />
        <small>The badge will also show up on <a href="https://chat.vote" target="_blank" rel="noopener noreferrer">chat.vote</a></small>
        <br />
        <small>If you encounter any issues while claiming your badge contact <a href="https://twitch.tv/badoge" target="_blank" rel="noopener noreferrer">badoge</a></small>
      </main>
    </div>

    <script>
      getUsername();
      async function getUsername() {
        let url = window.location.href;
        let access_token;
        try {
          access_token = url.match(/\#(?:access_token)\=([\S\s]*?)\&/)[1];
          if (!access_token) {
            window.history.replaceState(null, "", window.location.pathname);
            return;
          }
        } catch (error) {
          window.history.replaceState(null, "", window.location.pathname);
          return;
        }

        let myHeaders = new Headers();
        myHeaders.append("Authorization", "Bearer " + access_token);
        myHeaders.append("Client-Id", "ed2ch5dsxogpczmisjnbfnm92n4zps");
        let requestOptions = {
          method: "GET",
          headers: myHeaders,
          redirect: "follow",
        };
        try {
          let response = await fetch("https://api.twitch.tv/helix/users", requestOptions);
          if (response.status != 200) {
            document.getElementById("login").innerHTML = `<span class="text-danger">Could not login</span>`;
            window.history.replaceState(null, "", window.location.pathname);
            return;
          }
          let result = await response.json();
          localStorage.setItem(
            "DROPS",
            JSON.stringify({
              channel: result.data[0].login,
              userID: result.data[0].id,
            })
          );
          document.getElementById("login").innerHTML = `<span class="text-success">Twitch account connected!</span>`;
          window.history.replaceState(null, "", window.location.pathname);
        } catch (error) {
          console.log("error", error);
          document.getElementById("login").innerHTML = `<span class="text-danger">Could not login</span>`;
          window.history.replaceState(null, "", window.location.pathname);
        }
      }
    </script>

    <script src="/js/bootstrap.bundle.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RMN1GV8B4J"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-RMN1GV8B4J");
    </script>
  </body>
</html>
